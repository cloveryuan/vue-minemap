(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{143:function(t,n,e){},144:function(t,n,e){"use strict";var o=e(2),i=e(14),a=e(13),s=e(69),p=e(67),r=e(5),c=e(89).f,u=e(88).f,l=e(7).f,f=e(87).trim,h=o.Number,d=h,m=h.prototype,M="Number"==a(e(68)(m)),v="trim"in String.prototype,b=function(t){var n=p(t,!1);if("string"==typeof n&&n.length>2){var e,o,i,a=(n=v?n.trim():f(n,3)).charCodeAt(0);if(43===a||45===a){if(88===(e=n.charCodeAt(2))||120===e)return NaN}else if(48===a){switch(n.charCodeAt(1)){case 66:case 98:o=2,i=49;break;case 79:case 111:o=8,i=55;break;default:return+n}for(var s,r=n.slice(2),c=0,u=r.length;c<u;c++)if((s=r.charCodeAt(c))<48||s>i)return NaN;return parseInt(r,o)}}return+n};if(!h(" 0o1")||!h("0b1")||h("+0x1")){h=function(t){var n=arguments.length<1?0:t,e=this;return e instanceof h&&(M?r(function(){m.valueOf.call(e)}):"Number"!=a(e))?s(new d(b(n)),e,h):b(n)};for(var g,_=e(6)?c(d):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger".split(","),y=0;_.length>y;y++)i(d,g=_[y])&&!i(h,g)&&l(h,g,u(d,g));h.prototype=m,m.constructor=h,e(9)(o,"Number",h)}},145:function(t,n,e){"use strict";var o=e(143);e.n(o).a},146:function(t,n,e){"use strict";e(12),e(21),e(144),e(22),e(23);var o=[];function i(t){return o.filter(function(n){return n.id===t})[0].mapInstace}var a={name:"MineMap",provide:function(){return{getMap:this.getMap}},props:{accessToken:{type:String,required:!0},solution:{type:[String,Number],required:!0},options:{type:Object,required:!0},urls:{type:Object,required:!1}},data:function(){return{isMapLoaded:!1}},mounted:function(){this.initMap()},beforeDestroy:function(){},destroyed:function(){this.rmMap()},methods:{initMap:function(){var t=this,n=n||window.minemap,e=this.accessToken,i=this.solution,a=this.options;this.urls&&this.initParameter(n),n.accessToken=e,n.solution=i,this.rmMap(),this.isMapLoaded=!1,this.map=new n.Map(a),o.push({id:this.options.container,mapInstace:this.map}),this.map.on("load",function(){t.$emit("map-load",t.map),t.isMapLoaded=!0})},rmMap:function(){this.map&&(this.map.remove(),this.map=null,function(t){var n=null;o.forEach(function(e,o){e.id===t&&(n=o)}),o.splice(n,1)}(this.options.container))},getMap:function(){return this.map},initParameter:function(t){var n=this;["domainUrl","dataDomainUrl","spriteUrl","serviceUrl"].forEach(function(e){n.urls[e]&&(t[e]=n.urls[e])})}},watch:{solution:function(){this.initMap()}}},s=(e(145),e(0));e.d(n,"b",function(){return i});var p=Object(s.a)(a,function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"vue-minemap",attrs:{id:this.options.container}},[this._t("default")],2)},[],!1,null,"29c88cc4",null);p.options.__file="MineMap.vue";n.a=p.exports},147:function(t,n,e){},148:function(t,n,e){"use strict";e(90)("anchor",function(t){return function(n){return t(this,"a","name",n)}})},150:function(t,n,e){"use strict";var o=e(147);e.n(o).a},151:function(t,n,e){"use strict";e(148),e(21),e(50);var o={name:"MMPopup",props:{lnglat:{type:Array},mapInstace:{type:Object},offset:{type:Array},anchor:{type:String},closeButton:{type:Boolean,default:!0},closeOnClick:{type:Boolean,default:!0}},mounted:function(){var t=this;"MineMap"===this.$parent.$options.name?(this.$parent.$on("map-load",function(n){t.map=n,t.addPopup()}),this.$parent.isMapLoaded&&(this.map=this.getMap(),this.addPopup())):"MMMarker"===this.$parent.$options.name?(this.map=null,this.addPopup()):this.mapInstace&&(this.map=this.mapInstace,this.addPopup())},beforeDestroy:function(){this.rmPopup()},methods:{addPopup:function(){var t,n=n||window.minemap,e=this.map;try{t=this.$slots.content[0].elm}catch(t){throw new Error('请添加一个名为content的具名slot，使其作为popup的内容，例如：<h1 slot="content">hello world</h1>')}var o=this.lnglat,i=this.offset,a=this.anchor,s={closeButton:this.closeButton,closeOnClick:this.closeOnClick};i&&(s.offset=i),a&&(s.anchor=a),this.popup=new n.Popup(s).setDOMContent(t),o&&this.popup.setLngLat(o),e&&this.popup.addTo(e)},rmPopup:function(){this.popup&&this.popup.remove()},getPopup:function(){return this.popup}},watch:{lnglat:function(t){var n=this;"MineMap"===this.$parent.$options.name?this.$parent.isMapLoaded?this.popup.setLngLat(t):this.$parent.$once("map-load",function(e){n.popup.setLngLat(t)}):this.popup.setLngLat(t)}}},i=(e(150),e(0)),a=Object(i.a)(o,function(){var t=this.$createElement;return(this._self._c||t)("div",{staticClass:"MMPopup-container",staticStyle:{display:"none"}},[this._t("content")],2)},[],!1,null,"305e4bcc",null);a.options.__file="MMPopup.vue";n.a=a.exports},155:function(t,n,e){},166:function(t,n,e){"use strict";var o=e(155);e.n(o).a},179:function(t,n,e){"use strict";e.r(n);var o=e(146),i=e(151),a={name:"AddPopup",data:function(){return{mapProps:{accessToken:"e919a6f32ce242f5aec22652d9dc1fdb",solution:"7185",options:{container:"map",style:"//minedata.cn/service/solu/style/id/7185",center:[116.1866179,39.992559],zoom:9,minZoom:3,maxZoom:17}},popupClass:[],popupOffset:[50,0],popupLngLat:[116.1866179,39.992559]}},components:{MineMap:o.a,MMPopup:i.a},methods:{onClick:function(){var t=Object(o.b)("map");this.$refs.pop.popup.addTo(t)}}},s=(e(166),e(0)),p=Object(s.a)(a,function(){var t=this,n=t.$createElement,e=t._self._c||n;return e("div",{staticClass:"demo-container"},[e("MineMap",t._b({},"MineMap",t.mapProps,!1),[e("MMPopup",{ref:"pop",attrs:{lnglat:t.popupLngLat,offset:t.popupOffset,"close-on-click":!0}},[e("p",{staticClass:"popup-base",attrs:{slot:"content"},slot:"content"},[t._v("你好")])]),t._v(" "),e("button",{staticClass:"btn",on:{click:t.onClick}},[t._v("显示popup")])],1)],1)},[],!1,null,"f60c6784",null);p.options.__file="AddPopup.vue";n.default=p.exports}}]);